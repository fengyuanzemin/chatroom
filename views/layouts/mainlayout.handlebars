<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>{{title}}</title>
	<link rel="stylesheet" href="/css/style.css">	
	<style>
    * { 
        margin: 0; 
        padding: 0; 
        box-sizing: border-box; 
    }
    body { 
        font: 13px Helvetica, Arial,'微软雅黑','黑体'; 
    }
    form { 
        background: #000; 
        padding: 3px; 
        position: fixed; 
        bottom: 0; 
        width: 100%; 
    }
    form input { 
        border: 0; 
        padding: 10px; 
        width: 90%; 
        margin-right: .5%; 
    }
    form button { 
        width: 9%; 
        background: rgb(130, 224, 255); 
        border: none; padding: 10px; 
    }
    #messages { 
        list-style-type: none; 
        margin: 0; padding: 0; 
    }
    #messages li { 
        padding: 5px 10px; 
    }
    #messages li:nth-child(odd) { 
        background: #eee; 
    }
    </style>
</head>
<body>
	{{{body}}}
	<script src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script>
	<script src="//cdn.bootcss.com/socket.io/1.4.6/socket.io.min.js"></script>
	
	
    <script>
    $(function(){
        var name = prompt("输入昵称");
        if($.trim(name).length > 0) {
            $('#m').focus();
            // 聊天开始
            var socket = io();
            socket.emit('user connection', name);
            $('button').click(function(){
                socket.emit('chat message', $('#m').val());
                $('#m').val('');
                return false;
            });
            socket.on('chat message', function(msg){
                $('#messages').append('<li><p class="name">'+msg.user.name+'说：</p><p>'+msg.msg+'</p></li>');
            $('html, body, #message').animate({scrollTop: $(document).height()}, 100);
          });
            socket.on('hi', function(msg){
                $('#messages').append($('<li style="text-align: center;">').text(msg));
            });
            $('.form').show();
        }
    });
    </script>
</body>
</html>